
extends ../../layouts/default.pug
include  ../../mixins/filter-status.pug
include  ../../mixins/search-view.pug
include  ../../mixins/pagination.pug
block main
    h1 #{pageTitle}

    .card.mb-3  
        .card-header Bộ lọc và Tìm kiếm 
        .card-body 
            .row 
                .col-6
                    +filterStatus(filterStatus)
                .col-6 
                    +searchView(keyword)

    .card.mb-3  
        .card-header Danh sách
            .card-body 
                form(
                    action="/admin/products/change-multi?_method=PATCH"
                , method="post"
                form-change-multi
                ) 
                    .d-flex.align-items-start 
                        .form-group 
                            select(name = "type" class="form-control")
                                option(value="active") Hoạt Động 
                                option(value="inactive") Dừng hoạt động 
                        .form-group 
                            input(
                                type="text"
                                name="ids"
                                value=""
                                class="form-control d-none"
                            )  
                        button(type="submit" class="btn btn-primary") áp dụng

    table(
        class="table table-hover table-sm"
        checkboxAll
    )
        thead 
            tr 
                th 
                    input(type="checkbox"
                        checkAll
                    )
                th STT 
                th Hình ảnh 
                th Tiêu đề
                th Giá
                th Trạng thái 
                th Hành động 

        tbody 
            each item,index in listProducts
                tr 
                    td 
                        input(
                            type="checkbox"
                            name="id"
                            value=item.id
                        )
                    td #{index +1 }
                    td 
                        img(
                            src=item.thumbnail
                            alt = "Sản phẩm 1"
                            width = "100px"  
                            )
                    td #{item.title}
                    td #{item.price}$
                    td  
                        if(item.status === "active")
                            a(
                                href = "javascript:;" 
                                data-status = item.status 
                                id = item.id
                                button-change-status
                                class="badge badge-success"
                            ) #{item.status}
                        else 
                            a(
                                 href = "javascript:;" 
                                data-status = item.status 
                                id = item.id
                                button-change-status
                                class="badge badge-danger"
                                ) #{item.status}
                    td 
                        button(class="btn btn-warning btn-sm") Sửa
                        button(class="btn btn-danger btn-sm ml-1") Xóa

    +pagination(totalPages)

    form(action="",
        id= "form-change-status",
        path= "/admin/products/change-status/"

        , method="POST"
    ) 
    script(src="/admin/js/product.js") 


